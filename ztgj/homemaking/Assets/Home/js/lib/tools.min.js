define(function(require,exports,module){
	var $ = require('jquery-2.1.4.min')
	var Tool = {
          isTouch : function(){
			          	return "createTouch" in document;
			          }(),
		   events : {
                     'touchstart' : (this.isTouch ? 'touchstart' : 'mousedown'),
                     'touchmove' : (this.isTouch ? 'touchmove' : 'mousemove'),
                     'touchend' : (this.isTouch ? 'touchend' : 'mouseup'),
                     'tap' : (this.isTouch ? 'tap' : 'click')
		           },
		   limitHeight : function(obj,line){
		   	  var num = line || 3;
		   	  var objs = obj || '.limit-h';
		   	  var $obj = $(objs);
		   	  var h = parseInt($obj.css('line-height'))*num;
		   	  $obj.each(function(){

		   	  	var $this = $(this);
		   	  	if($this.hasClass('active')){
		   	  		return true;
		   	  	}
		   	  	if($this.find('.limit-content').height() > h){
                    $this.nextAll('.read-all').show();
		   	  	}
		   	  	$this.css({
		   	  		maxHeight : h + 'px'
		   	  	});
		   	  	
		   	  })
             $('.read-all').off(Tool.events.tap);
		   	 $('.read-all').on(Tool.events.tap,function(){
		   	  	  var $this = $(this);
		   	  	  var $icon = $this.find('.icon');

                  if($this.hasClass('active')){

                      $this.removeClass('active');
                      $this.prevAll(objs)
                           .removeClass('active')
                           .css({
				   	  	  	  maxHeight : h + 'px'
				   	  	    });
                  } else{
                     $this.addClass('active');
                     $this.prevAll(objs)
                          .addClass('active')
                          .css({
				   	  	  	maxHeight : 'none'
				   	  	  });
                  }
		   	  	  
		   	  })
		   }
	}
    module.exports = Tool;
})