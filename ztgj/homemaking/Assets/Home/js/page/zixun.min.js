seajs.use(['/Assets/Home/js/lib/jquery-2.1.4.min','/Assets/Home/js/lib/tools.min','/Assets/Home/js/plug/scrollListener/jquery.scrollListener','/Assets/Home/js/plug/scrollAjax/scrollAjax','/Assets/Home/js/plug/stickUp/stickUp.min','/Assets/Home/js/plug/stickUp/stickUp.min','/Assets/Home/js/plug/popup/popup','/Assets/Home/js/plug/hammer/hammer.min'],function($,tool){
		
		$(function(){
          $('.stick-up').stickUp();
          $('.search-box .form-control').on('keyup',function(){
             checkShearboxEmpty(this);
          });
          checkShearboxEmpty($('.search-box .form-control'));
          function checkShearboxEmpty(obj){

             var $this = $(obj);
             var $scope = $this.closest('form');
             var val = $.trim($this.val());

             if(val == ''){
                $scope.find('.sub-btn').prop('disabled','disabled');
             } else{
              $scope.find('.sub-btn').prop('disabled',false);
             }

          }

          $('.article-bar .share-btn').popup({
                content : '<img src="/Assets/Home/images/share.png"/>',
                position: 'top',
                className : 'share-popup',
                effectClass : 'top',
                opacity:.5
               });
         var panup = new Hammer($('body')[0],{threshold :0});
             panup.on('panup',function(){
              $(window).scrollListener({

                  scrollEnd : function(top,maxH,el){



                  $('.zixun-search-list').scrollAjax({
                          ajax : {
                            url : '/Homemaking-parentingInformationSearch',
                            data : {
                              keyword : $('input[name=keyword]').val(),
                              id : $('#id').val()
                            }
                          },
                          html : function(data){
                              var html = '',
                                  len = data.length,
                                  detailUrl = '/Homemaking-parentingInformationDetail-id-';

                                  for(var i = 0 ; i < len; i++){

                                         html += '<li>'
                                               + '<a class="horizontal horizontal-r" href="'+ detailUrl + data[i].fldId + '-v-' + $.now() +'" target="_blank" title="'+ data[i].fldTitle +'">'
                                               + '<div class="right"><i class="icon icon-yan-small"></i>'+ data[i].fldViewNum +'</div>'
                                               + '<p class="left">'+ data[i].fldTitle +'</p>'
                                               + '</a></li>';

                                     }
                                   return html
                          }

                        })
                  }
                });
        });
		});

  })